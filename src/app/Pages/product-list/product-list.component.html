<div class="filters">
  <!-- Sorting Dropdown -->
  <mat-form-field appearance="outline">
    <mat-label>Sort by Price</mat-label>
    <mat-select (selectionChange)="onSortChange($event)">
      <mat-option value="lowToHigh">Low to High</mat-option>
      <mat-option value="highToLow">High to Low</mat-option>
    </mat-select>
  </mat-form-field>

  <!-- Category Filter -->
  <mat-form-field appearance="outline">
    <mat-label>Category</mat-label>
    <mat-select (selectionChange)="onCategoryChange($event)">
      <mat-option value="">All Categories</mat-option>
      <mat-option *ngFor="let cat of categories" [value]="cat">{{ cat }}</mat-option>
    </mat-select>
  </mat-form-field>

  <!-- Price Range Filter -->
  <mat-form-field appearance="outline">
    <mat-label>Max Price</mat-label>
    <input matInput type="number" [(ngModel)]="maxPrice" (input)="applyFilters()" />
  </mat-form-field>

  <!-- Search by Title -->
  <mat-form-field appearance="outline">
    <mat-label>Search</mat-label>
    <input matInput type="text" [(ngModel)]="searchTerm" (input)="applyFilters()" placeholder="Search products..." />
  </mat-form-field>
</div>

<!-- Product List with Pagination -->
<div class="product-container">
  <mat-card *ngFor="let product of filteredProducts | paginate: { id: 'productsPagination', itemsPerPage: itemsPerPage, currentPage: currentPage }" class="product-card">
    <img mat-card-image [src]="product.images[0]" alt="{{ product.title }}" />
    <mat-card-content>
      <h2>{{ product.title }}</h2>
      <p>Price: ${{ product.price }}</p>
    </mat-card-content>
    <mat-card-actions>
      <button mat-button color="primary" [routerLink]="['/product', product.id]">View Details</button>
    </mat-card-actions>
  </mat-card>
</div>

<!-- Pagination Controls with Matching ID -->
<pagination-controls id="productsPagination" (pageChange)="currentPage = $event"></pagination-controls>
